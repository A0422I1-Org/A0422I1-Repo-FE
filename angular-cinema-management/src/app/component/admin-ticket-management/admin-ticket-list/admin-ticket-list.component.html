<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>  Quản lý đặt vé</title>
  // thư viện dưới đã được thêm vào file index.html
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">-->
<!--  &lt;!&ndash;    // thư viện dưới dùng để hiển thị modal&ndash;&gt;-->
<!--  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"-->
<!--          integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"-->
<!--          crossorigin="anonymous"></script>-->
<!--  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"-->
<!--          integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>-->

  <!--    Thư viện dưới để dùng để hiển thị icon nhận vé và icon tìm kiếm-->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>
<body>
<div class="container py-2">
  <!--    Header      -->
  <div class="row align-items-center">
    <div class="col-3">
      <img src="assets/image/logo_movie-removebg-preview.png" alt="" class="img-fluid"
           style="width: auto;">
    </div>
    <div class="col-9">
      <div class="dropdown float-end px-4">
        <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
           id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="assets/image/123123213123.jpg" alt="" width="32" height="32" class="rounded-circle me-2">
          <strong style="color: #F26b38">Phạm Thế Duyệt</strong>
        </a>
        <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser" style="">
          <li><a class="dropdown-item" href="#">Cài đặt</a></li>
          <li><a class="dropdown-item" href="#">Thông tin cá nhân</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="#">Đăng xuất</a></li>
        </ul>
      </div>
      <form class="float-end w-25" role="search">
        <input type="search" class="form-control bg-light" placeholder="Tìm kiếm..." aria-label="Search">
      </form>
    </div>
  </div>

  <!--    Sidebar      -->
  <div class="row">
    <div class="col-lg-3">
      <div class="card mb-4">
        <div class="card-header rounded-1" style="background-color: rgba(0, 0, 0, 0)">
          <div class="d-block justify-content-center">
            <ul class="nav nav-pills flex-column flex-shrink-0 mb-auto">
              <li class="nav-item">
                <a href="#" class="nav-link link-dark" aria-current="page">
                  <img src="assets/image/ban-ve.jpg" height="20" width="20"/>
                  Bán vé
                </a>
              </li>
              <li>
                <a href="xan_nhan_nhan_ve" class="nav-link link-dark active">
                  <img src="assets/image/quan-ly-ban-ve.png" height="20" width="20"/>
                  Quản lý đặt vé
                </a>
              </li>
              <li>
                <a href="#" class="nav-link link-dark">
                  <img src="assets/image/quan-ly-nhan-vien.png" height="20" width="20"/>
                  Quản lý nhân viên
                </a>
              </li>
              <li>
                <a href="#" class="nav-link link-dark ">
                  <img src="assets/image/quan-ly-thanh-vien.jpg" height="20" width="20"/>
                  Quản lý thành viên
                </a>
              </li>
              <li>
                <a href="#" class="nav-link link-dark">
                  <img src="assets/image/quan-ly-phim.png" height="20" width="20"/>
                  Quản lý phim
                </a>
              </li>
              <li>
                <a href="#" class="nav-link link-dark">
                  <img src="assets/image/quan-ly-khuyen-mai.png" height="20" width="20"/>
                  Quản lý khuyến mãi
                </a>
              </li>
              <li>
                <a href="#" class="nav-link link-dark">
                  <img src="assets/image/quan-ly-rap-chieu.png" height="20" width="20"/>
                  Quản lý phòng chiếu
                </a>
              </li>
              <li>
                <a href="#" class="nav-link link-dark">
                  <img src="assets/image/thong-ke.png" height="20" width="20"/>
                  Thống kê
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!--    main-->
    <div class="col-lg-9">
      <div class="col">
        <div class="card">
          <div class="bg-light card card-header p-3 mb-4 text-uppercase display fw-bold" style="float: left">
            <div class="row">
              <div class="col 7">
                Quản lý danh sách đặt vé
              </div>
              <div class="col-5">
                <form class="d-flex" [formGroup]="formSearch" (ngSubmit)="getAllTicket(0)">
                  <input type="search" class="form-control bg-light my-1 " placeholder="Tìm kiếm..."
                         aria-label="Search" name="name" formControlName="name" >
                  <button class="btn my-1 bg-subs"  type="submit">
                    <i class="bi bi-search"></i>
                  </button>
                </form>
                <p style="color: red" *ngIf="formSearch.controls.name.hasError('maxlength')&& formSearch.controls.name.dirty">Không được nhập quá 20 ký tự</p>

              </div>
            </div>

            <div class="card-body">

              <div class="table-responsive table-bordered rounded shadow">
                <table class="table table-striped table-hover text-center">
                  <thead class="bg-subs">
                  <tr>
                    <th>#</th>
                    <th>Mã đặt vé</th>
                    <th>Mã thành viên</th>
                    <th class="center_number">Họ tên</th>
                    <th>CCCD</th>
                    <th>Số điện thoại</th>
                    <th>Nhận vé</th>
                    <th>Xoá vé</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let ticket of tickets;index as i">
                    <th>{{i}}</th>
                    <td>{{ticket.id}}</td>
                    <td>{{ticket.customer.id}}</td>
                    <td class="center_number">{{ticket.customer.fullName}}</td>
                    <td class="center_number">{{ticket.customer.cardId}}</td>
                    <td>{{ticket.customer.phoneNumber}}</td>
                    <td><a (click)="nextPage(ticket.id)"><i class="fa-solid fa-square-check fa-xl"></i></a></td>
                    <td>
                      <div class="btn-group" role="group" aria-label="Basic mixed styles example">
                        <a (click)="getId(ticket.id)"  data-bs-toggle="modal" data-bs-target="#deleteModal">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                               class="bi bi-trash3 delete" viewBox="0 0 16 16"  >
                            <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                          </svg>
                        </a>
                      </div>
                    </td>
                  </tr>
                  </tbody>
                </table>
                <!--                Page-->
<!--                <div class="d-flex justify-content-center m-md-auto">-->
<!--                  <nav-->
<!--                    aria-label="Page navigation example justify-content-center "-->
<!--                  >-->
<!--                    <ul class="pagination">-->
<!--                      <li class="page-item">-->
<!--                        <a-->
<!--                          class="page-link "-->
<!--                          href="#"-->
<!--                          aria-label="Previous"-->
<!--                        >-->
<!--                          <span aria-hidden="true">&laquo;</span>-->
<!--                        </a>-->
<!--                      </li>-->
<!--                      <li class="page-item">-->
<!--                        <a class="page-link " href="#">1</a>-->
<!--                      </li>-->
<!--                      <li class="page-item">-->
<!--                        <a class="page-link " href="#">2</a>-->
<!--                      </li>-->
<!--                      <li class="page-item ">-->
<!--                        <a class="page-link " href="#">3</a>-->
<!--                      </li>-->
<!--                      <li class="page-item">-->
<!--                        <a-->
<!--                          class="page-link "-->
<!--                          href="#"-->
<!--                          aria-label="Next"-->
<!--                        >-->
<!--                          <span aria-hidden="true">&raquo;</span>-->
<!--                        </a>-->
<!--                      </li>-->
<!--                    </ul>-->
<!--                  </nav>-->
<!--                </div>-->



                <!--page-->
                <div *ngIf="(totalElements> 0); else isEmpty">
                  <ul class="pagination justify-content-center">
                    <li class="page-item">
                      <a class="page-link" *ngIf="indexPagination != 0 ? 'disable': ''">
                        <i class="fa-solid fa-backward-fast"
                           (click)="getAllTicket(0)"></i>
                      </a>
                    </li>
                    <li>
                      <a class="page-link" *ngIf="indexPagination != 0 ? 'disable': ''">
                        <i class="fa-solid fa-backward"
                           (click)="getAllTicket(indexPagination - 1)"></i>
                      </a>
                    </li>
                    <li class="page-item" *ngFor="let item of [].constructor(totalPages); let i = index">

                      <ng-container *ngIf="i < 3 || i >= totalPages - 3">
                        <a class="page-link" [ngClass]="indexPagination == i ? 'current': ''"
                           (click)="getAllTicket(i)">
                          {{i + 1}}
                        </a>
                      </ng-container>
                      <ng-container *ngIf="3 <= i && i < totalPages - 3 &&(i == indexPagination + 1 || i== indexPagination-1 || i ==indexPagination)">
                        <a class="page-link" [ngClass]="indexPagination == i ? 'current': ''"
                           (click)="getAllTicket(i)">
                          {{i + 1}}
                        </a>
                      </ng-container>
                      <ng-container *ngIf="(3 < i && i < totalPages - 3 && i != indexPagination && i != indexPagination + 1 && i!=indexPagination-1)">
                        <a class="page-link">
                          ...
                        </a>
                      </ng-container>
                    </li>
                    <li>
                      <a class="page-link"  *ngIf="indexPagination < totalPages - 1 ? 'disable': ''">
                        <i class="fa-solid fa-forward"
                           (click)="getAllTicket(indexPagination + 1)"></i>
                      </a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" *ngIf="indexPagination < totalPages - 1 ? 'disable': ''"
                         (click)="getAllTicket(totalPages - 1)">
                        <i class="fa-solid fa-forward-fast"></i> </a>
                    </li>
                    <li class="page-item">
                      <span class="page-link">{{indexPagination + 1}} / {{totalPages}}</span>
                    </li>
                    <li class="page-item">
                      <div class="input-group rounded">
                        <input id="input-page-choice" type="number" class="form-control rounded" placeholder="chọn trong {{totalPages}} trang" #element
                               aria-label="Search" aria-describedby="search-addon"/>
                        <span class="input-group-text border-0 bg-subs" id="search-addon">
     <i class="fas fa-search "
        (click)="getPageChoice(element.value-1)"></i>
  </span>
<!--                        Hết phân trang-->
                      </div>
                    </li>
                  </ul>
                </div>
                <ng-template #isEmpty class="clearfix">
                  <div style="font-size: 18px; margin-left: 73px" class="hint-text">Không tìm thấy vé phù hợp với từ khoá<b>"" </b></div>
                </ng-template>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Button trigger modal -->

  <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content container ">
        <div class="modal-header nav-pills">
          <h5 class="modal-title" id="exampleModalLabel">Xoá vé</h5>
        </div>
        <p>(Vé bị xoá sẽ không thể sử dụng )</p>
        <div class="modal-body">
          <div class="row">
            <div class="col-3">
              <img style="width: 100%" src="assets/image/11111111.jpg">
            </div>
            <div class="col-9">
              <table>
                <tr>
                  <td style="text-align: right">
                    Mã đặt vé <span style="color: red">*</span>
                  </td>
                  <td style="width: 80%">
                    <input  class="form-control ml-2" disabled value="{{ticket.id}}" >
                  </td>
                </tr>

                <tr>
                  <td style="text-align: right">
                    Mã thành viên <span style="color: red">*</span>
                  </td>
                  <td>
                    <input class="form-control ml-2" disabled value="{{ticket.customerId}}" >
                  </td>
                </tr>

                <tr>
                  <td style="text-align: right">
                    Họ tên <span style="color: red">*</span>
                  </td>
                  <td>
                    <input class="form-control ml-2" disabled value="{{ticket.fullName}}" >
                  </td>
                </tr>

                <tr>
                  <td style="text-align: right">
                    CMND <span style="color: red">*</span>
                  </td>
                  <td>
                    <input class="form-control ml-2" disabled value="{{ticket.cardId}}" >
                  </td>
                </tr>

                <tr>
                  <td style="text-align: right">
                    Email <span style="color: red">*</span>
                  </td>
                  <td>
                    <input class="form-control ml-2" disabled value="{{ticket.email}}" >
                  </td>
                </tr>
                <tr>
                  <td style="text-align: right">
                    Số điện thoại <span style="color: red">*</span>
                  </td>
                  <td>
                    <input class="form-control ml-2" disabled value="{{ticket.phoneNumber}}" >
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td>
                    <button type="button" class="btn bg-sub" (click)="delete(ticket.id)">Xóa</button>
                    <button type="button" class="btn btn-secondary ml-2" data-bs-dismiss="modal">Quay lại</button>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <p style="color: red; margin-right: 100px" >*Lưu ý: Hành động này không thể hoàn tác, bạn có chắc chắn muốn xóa?</p>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
