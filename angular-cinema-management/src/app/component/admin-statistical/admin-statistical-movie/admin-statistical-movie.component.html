<!--Mọi người search từ khóa Header, Sidebar, Main để đến phần cần chỉnh sửa nha-->


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Thống Kê Phim</title>

  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/chart.css">
  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/[A0422I1]_Prototype_DuHC.css">
  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/score.css">
  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/rank_img.css">
  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/admin.css">


<!--icon-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">


</head>
<body>


<div class="container py-2">
  <!--    Header      -->
  <div class="row align-items-center">
    <div class="col-3">
      <img src="..\assets\statistical-movie-and-customer\image\logo_movie-removebg-preview.png" alt="" class="img-fluid"
           style="width: auto">
    </div>
    <div class="col-9">
      <div class="dropdown float-end px-4">
        <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
           id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="..\assets\statistical-movie-and-customer\image\avatar.png" alt="" width="32" height="32"
               class="rounded-circle me-2">
          <strong style="color: #F26b38">DuHC</strong>
        </a>
        <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser" style="">
          <li><a class="dropdown-item" href="#">Cài đặt</a></li>
          <li><a class="dropdown-item" href="#">Thông tin cá nhân</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="#">Đăng xuất</a></li>
        </ul>
      </div>

    </div>
  </div>
  <!--    End header-->

  <!--    Sidebar      -->
  <div class="row">
    <div class="col-lg-3">
      <nav class="navbar navbar-expand-lg navbar-light" style="padding: 0px">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <div class="card mb-4 " style="width: 100%">
            <div class="card-header rounded-1" style="background-color: rgba(0, 0, 0, 0)">
              <div class="d-block justify-content-center">
                <ul class="nav nav-pills flex-column flex-shrink-0 mb-auto">
                  <li class="nav-item">
                    <a href="#" class="nav-link link-primary" aria-current="page">
                      <img src="..\assets\statistical-movie-and-customer\image\ban-ve.jpg" height="20" width="20"/>
                      Bán vé
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary  ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-ban-ve.png" height="20"
                           width="20"/>
                      Quản lý đặt vé
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-nhan-vien.png" height="20"
                           width="20"/>
                      Quản lý nhân viên
                    </a>
                  </li>
                  <li>
                    <a href="member_list.html" class="nav-link link-primary  ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-thanh-vien-.png" height="20"
                           width="20"/>
                      Quản lý thành viên
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-phim.png" height="20"
                           width="20"/>
                      Quản lý phim
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-khuyen-mai.png" height="20"
                           width="20"/>
                      Quản lý khuyến mãi
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-rap-chieu.png" height="20"
                           width="20"/>
                      Quản lý phòng chiếu
                    </a>
                  </li>
                  <li>
                    <a class="nav-link link-primary " data-bs-toggle="collapse"
                       href="#collapseExample" role="button"
                       aria-expanded="false" aria-controls="collapseExample">
                      <img src="..\assets\statistical-movie-and-customer\image\thong-ke.png" height="20" width="20"/>
                      &ensp;Thống kê
                    </a>
                  </li>
                  <div class="collapse" id="collapseExample">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      <li><a [routerLink]="['/statistic/statistic-movie']"
                             class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kê phim</a>
                      </li>
                      <li><a [routerLink]="['/statistic/statistic-customer']"
                             class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kê thành viên</a>
                      </li>
                      <li><a href="category_statistic.html"
                             class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kê thể loại phim </a>
                      </li>
                      <li><a href="showtime_statistic.html"
                             class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kế suất chiếu</a>
                      </li>
                    </ul>
                  </div>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
    <!--  end sidebar-->

    <!-- Thống kê-->
    <div class="col-lg-9">
      <div class="col">
        <div class="card">
          <div class="bg-light card card-header p-3 mb-4 text-uppercase display fw-bold ">
            <div class="row align-items-center">
              <div class="col-8">Thống Kê Phim</div>
              <div class="col-4 d-flex ">
                <input #nameMovie type="search" class="form-control bg-light my-1" placeholder="Tìm kiếm tên phim..."
                       aria-label="Search">
                <button class="btn my-1 mx-1" style="background-color: #F26b38; color: white"
                        (click)="getMovieStatisticListPaging(indexPagination, nameMovie.value, statusSort)">
                  <i class="bi bi-search"></i>
                </button>
              </div>
            </div>
          </div>

<!--          chart-->
          <div class="row" style="margin: 1px">
            <div class="col-6">
            </div>
            <div class="col-6" style="text-align: end" >
              <button class="btn " style="background-color:#F26B38 " (click)="displayChart()">
                <i class="bi bi-bar-chart-line-fill but"></i>
              </button>
            </div>
            <div class="card-body">
              <canvas class="my-4 w-100" [hidden]="statusChart" id="movieChart" width="500" height="150"></canvas>
            </div>
          </div>

          <!--          end chart-->

          <div class="card-body">
            <div class="table-responsive table-bordered rounded shadow">
              <table class="table text-center">
                <thead style="background-color: #F26B38; color: #fff;">
                <tr>
                  <th>#</th>
                  <th>Tên Phim</th>
                  <th>
                    Tổng tiền(đ)
                  </th>
                  <th>Số lượng vé bán được
                    <button class="btn" style="background-color:#F26B38; padding: unset"
                            (click)="sortMovieByTicket(indexPagination, nameMovie.value, statusSort)">
                      <div *ngIf="statusSort == 'acs'"><i class="bi bi-sort-up" ></i></div>
                      <div *ngIf="statusSort == 'desc'"><i class="bi bi-sort-down"></i></div>
                    </button>
                  </th>
                  <th></th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let item of movieStatisticList; index as i">
                  <td>{{((indexPagination) * 5) + i + 1}}</td>
                  <td style="text-align: left">{{item.name}}</td>
                  <td class="colSpan">
                    <div class="animated-progress progress-orange">
                      <span data-progress="100">{{item.totalTicket}}</span>
                    </div>
                    <div class="animated-progress progress-black">
                      <span data-progress="100">{{item.totalMoney}}</span>
                    </div>
                    <div class="num">{{item.totalMoney | number: '1.0-9'}}</div>

                  </td>
                  <td>
                    <div class="num">{{item.totalTicket }}</div>
                  </td>
                </tr>
                </tbody>
              </table>
              <!--       end thống kê-->

              <!--            phân trang  <-->
              <div *ngIf="(totalElements> 0)">
                <ul class="pagination justify-content-center">
                  <li class="page-item">
                    <a class="page-link" *ngIf="indexPagination != 0 ? 'disable': ''">
                      <i class="fa-solid fa-backward-fast"
                         (click)="getMovieStatisticListPaging(0,nameMovie.value , statusSort)"></i>
                    </a>
                  </li>
                  <li>
                    <a class="page-link" *ngIf="indexPagination != 0 ? 'disable': ''">
                      <i class="fa-solid fa-backward"
                         (click)="getMovieStatisticListPaging(indexPagination - 1,nameMovie.value , statusSort)"></i>
                    </a>
                  </li>
                  <li class="page-item " *ngFor="let item of [].constructor(totalPages); let i = index">
                    <ng-container  *ngIf="i < 3 || i >= totalPages - 3">
                      <a class="page-link  "  [ngClass]="indexPagination == i ? 'current': ''"
                         (click)="getMovieStatisticListPaging(i,nameMovie.value ,statusSort)">
                        {{i + 1}}
                      </a>
                    </ng-container>
                    <ng-container
                      *ngIf="3 <= i && i < totalPages - 3 &&(i == indexPagination + 1 || i== indexPagination-1 || i ==indexPagination)">
                      <a class="page-link" [ngClass]="indexPagination == i ? 'current': ''"
                         (click)="getMovieStatisticListPaging(i,nameMovie.value , statusSort)">
                        {{i + 1}}
                      </a>
                    </ng-container>
                    <ng-container
                      *ngIf="(3 < i && i < totalPages - 3 && i != indexPagination && i != indexPagination + 1 && i!=indexPagination-1)">
                      <a class="page-link">
                        ...
                      </a>
                    </ng-container>
                  </li>
                  <li>
                    <a class="page-link" *ngIf="indexPagination < totalPages - 1 ? 'disable': ''">
                      <i class="fa-solid fa-forward"
                         (click)="getMovieStatisticListPaging(indexPagination + 1,nameMovie.value , statusSort)"></i>
                    </a>
                  </li>
                  <li class="page-item ">
                    <a class="page-link" *ngIf="indexPagination < totalPages - 1 ? 'disable': ''"
                       (click)="getMovieStatisticListPaging(totalPages-1 ,nameMovie.value , statusSort)">
                      <i class="fa-solid fa-forward-fast"></i> </a>
                  </li>
                  <li class="page-item">
                    <span class="page-link">{{indexPagination + 1}} / {{totalPages}}</span>
                  </li>
                  <li class="page-item">
                    <div class="input-group rounded" style="width: 50%">
                      <input id="input-page-choice" type="number" class="form-control rounded"
                             placeholder="page" #element
                             aria-label="Search" aria-describedby="search-addon"/>
                      <span class="input-group-text border-0" id="search-addon">
                        <i class="fas fa-search" (click)="getPageChoice(element.value-1,nameMovie.value)"></i>
                      </span>
                    </div>
                  </li>
                </ul>
              </div>
<!--              end phân trang-->

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


</body>
</html>
