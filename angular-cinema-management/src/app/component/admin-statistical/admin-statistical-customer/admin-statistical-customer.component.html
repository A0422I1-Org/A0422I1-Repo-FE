<!--Mọi người search từ khóa Header, Sidebar, Main để đến phần cần chỉnh sửa nha-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Thống Kê Thành Viên</title>

  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/admin.css">
  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/score.css">
  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/[A0422I1]_Prototype_DuHC.css">
  <link rel="stylesheet" href="../../../../assets/statistical-movie-and-customer/css/rank_img.css">


<!--  icon-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>
<body>

<div class="container py-2">
  <!--    Header      -->
  <div class="row align-items-center">
    <div class="col-3">
      <img src="..\assets\statistical-movie-and-customer\image\logo_movie-removebg-preview.png" alt="" class="img-fluid"
           style="width: auto ">
    </div>
    <div class="col-9">
      <div class="dropdown float-end px-4">
        <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
           id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="..\assets\statistical-movie-and-customer\image\avatar.png" alt="" width="32" height="32" class="rounded-circle me-2">
          <strong style="color: #F26b38">DuHC</strong>
        </a>
        <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser" style="">
          <li><a class="dropdown-item" href="#">Cài đặt</a></li>
          <li><a class="dropdown-item" href="#">Thông tin cá nhân</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="#">Đăng xuất</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!--    Sidebar      -->
  <div class="row">
    <div class="col-lg-3">
      <nav class="navbar navbar-expand-lg navbar-light" style="padding: 0px">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <div class="card mb-4 " style="width: 100%">
            <div class="card-header rounded-1" style="background-color: rgba(0, 0, 0, 0)">
              <div class="d-block justify-content-center">
                <ul class="nav nav-pills flex-column flex-shrink-0 mb-auto">
                  <li class="nav-item">
                    <a href="#" class="nav-link link-primary" aria-current="page">
                      <img src="..\assets\statistical-movie-and-customer\image\ban-ve.jpg" height="20" width="20"/>
                      Bán vé
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-ban-ve.png" height="20" width="20"/>
                      Quản lý đặt vé
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-nhan-vien.png" height="20" width="20"/>
                      Quản lý nhân viên
                    </a>
                  </li>
                  <li>
                    <a href="member_list.html" class="nav-link link-primary ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-thanh-vien-.png" height="20" width="20"/>
                      Quản lý thành viên
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-phim.png" height="20" width="20"/>
                      Quản lý phim
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-khuyen-mai.png" height="20" width="20"/>
                      Quản lý khuyến mãi
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link link-primary ">
                      <img src="..\assets\statistical-movie-and-customer\image\quan-ly-rap-chieu.png" height="20" width="20"/>
                      Quản lý phòng chiếu
                    </a>
                  </li>
                  <li>
                    <a class="nav-link link-primary" data-bs-toggle="collapse"
                       href="#collapseExample" role="button"
                       aria-expanded="false" aria-controls="collapseExample">
                      <img src="..\assets\statistical-movie-and-customer\image\thong-ke.png" height="20" width="20"/>
                      &ensp;Thống kê
                    </a>
                  </li>
                  <div class="collapse" id="collapseExample">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      <li><a [routerLink]="['/statistic/movie']" class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kê phim</a>
                      </li>
                      <li><a [routerLink]="['/statistic/member']" class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kê thành viên</a>
                      </li>
                      <li><a href="category_statistic.html"
                             class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kê thể loại phim </a>
                      </li>
                      <li><a href="showtime_statistic.html"
                             class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link link-primary">Thống
                        kế suất chiếu</a>
                      </li>
                    </ul>
                  </div>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>

    <!--        Thống Kê-->
    <div class="col-lg-9">
      <div class="col">
        <div class="card">
          <div class="bg-light card card-header p-3 mb-4 text-uppercase display fw-bold ">
            <div class="row align-items-center">
              <div class="col-8">Thống Kê Thành viên</div>
              <div class="col-4 d-flex">
                <input #nameCustomer type="search" class="form-control bg-light my-1" placeholder="Tìm kiếm..."
                       aria-label="Search">
                <button class="btn my-1 mx-1" style="background-color: #F26b38; color: white"
                        (click)="getCustomerStatisticList(indexPagination, nameCustomer.value, statusSort)">
                  <i class="bi bi-search"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="table-responsive table-bordered rounded shadow">
              <table class="table table-striped table-hover text-center">
                <thead style="background-color: #F26B38; color: #fff;">
                <tr>
                  <th>#</th>
                  <th>Mã thành viên</th>
                  <th>Tên thành viên</th>
                  <th>Tổng tiền(đ)</th>
                  <th>Điểm tích lũy</th>
                  <th>Số lượng vé
                    <button class="btn" style="background-color:#F26B38; padding: unset"
                            (click)="sortCustomerByTicket(indexPagination, nameCustomer.value, statusSort)">
                      <div *ngIf="statusSort == 'acs'"><i class="bi bi-sort-up" ></i></div>
                      <div *ngIf="statusSort == 'desc'"><i class="bi bi-sort-down"></i></div>
                    </button>
                </tr>
                </thead>
                <tbody>
                <tr data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasWithBackdrop" aria-controls="offcanvasWithBackdrop"
                *ngFor="let item of customerStatisticList ; index as i" (click)="getInfoCustomer(item)">
                  <td>{{((indexPagination) * 5) + i + 1}}</td>
                  <td>{{item.id}}</td>
                  <td>{{item.name}}</td>
                  <td>{{item.money | number: '1.0-9'}}</td>
                  <td>{{item.point | number: '1.0-9'}}</td>
                  <td>{{item.ticket}}</td>
                </tr>
                </tbody>
              </table>
<!--              End thống kê-->

<!--              Phân trang-->
              <div *ngIf="(totalElements> 0)">
                <ul class="pagination justify-content-center">
                  <li class="page-item">
                    <a class="page-link" *ngIf="indexPagination != 0 ? 'disable': ''">
                      <i class="fa-solid fa-backward-fast"
                         (click)="getCustomerStatisticList(0,nameCustomer.value , statusSort)"></i>
                    </a>
                  </li>
                  <li>
                    <a class="page-link" *ngIf="indexPagination != 0 ? 'disable': ''">
                      <i class="fa-solid fa-backward"
                         (click)="getCustomerStatisticList(indexPagination - 1,nameCustomer.value , statusSort)"></i>
                    </a>
                  </li>
                  <li class="page-item " *ngFor="let item of [].constructor(totalPages); let i = index">
                    <ng-container  *ngIf="i < 3 || i >= totalPages - 3">
                      <a class="page-link  "  [ngClass]="indexPagination == i ? 'current': ''"
                         (click)="getCustomerStatisticList(i,nameCustomer.value ,statusSort)">
                        {{i + 1}}
                      </a>
                    </ng-container>
                    <ng-container
                      *ngIf="3 <= i && i < totalPages - 3 &&(i == indexPagination + 1 || i== indexPagination-1 || i ==indexPagination)">
                      <a class="page-link" [ngClass]="indexPagination == i ? 'current': ''"
                         (click)="getCustomerStatisticList(i,nameCustomer.value , statusSort)">
                        {{i + 1}}
                      </a>
                    </ng-container>
                    <ng-container
                      *ngIf="(3 < i && i < totalPages - 3 && i != indexPagination && i != indexPagination + 1 && i!=indexPagination-1)">
                      <a class="page-link">
                        ...
                      </a>
                    </ng-container>
                  </li>
                  <li>
                    <a class="page-link" *ngIf="indexPagination < totalPages - 1 ? 'disable': ''">
                      <i class="fa-solid fa-forward"
                         (click)="getCustomerStatisticList(indexPagination + 1,nameCustomer.value , statusSort)"></i>
                    </a>
                  </li>
                  <li class="page-item ">
                    <a class="page-link" *ngIf="indexPagination < totalPages - 1 ? 'disable': ''"
                       (click)="getCustomerStatisticList(totalPages-1 ,nameCustomer.value , statusSort)">
                      <i class="fa-solid fa-forward-fast"></i> </a>
                  </li>
                  <li class="page-item">
                    <span class="page-link">{{indexPagination + 1}} / {{totalPages}}</span>
                  </li>
                  <li class="page-item">
                    <div class="input-group rounded" style="width: 50%">
                      <input id="input-page-choice" type="number" class="form-control rounded"
                             placeholder="page" #element
                             aria-label="Search" aria-describedby="search-addon"/>
                      <span class="input-group-text border-0" id="search-addon">
                        <i class="fas fa-search" (click)="getPageChoice(element.value-1,nameCustomer.value)"></i>
                      </span>
                    </div>
                  </li>
                </ul>
              </div>


            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--offCanva-->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasWithBackdrop"
     aria-labelledby="offcanvasWithBackdropLabel" style="background-color: #fff">
  <div class="offcanvas-header " style="color: #1a1a1a; background-color:#F26b38 ">
    <h5 class="offcanvas-title" id="offcanvasWithBackdropLabel">TOP OF THE MEMBER</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body" style="background-color: #1a1a1a">
    <div class="row">
      <div class="col-4"></div>
      <div class="col-4 ">
        <div class="parent">
          <img class="image1" src="..\assets\statistical-movie-and-customer\image\crown.png" width="100px" height="100px">
          <img class="image2 rounded-circle" src="..\assets\statistical-movie-and-customer\image\avatar.png" width="60px" height="60px"
               style="border: 2px solid #F26b38">
        </div>
      </div>
      <div class="col-4"></div>
    </div>
    <div style="font-size: 14px">
      <div style="margin: 50px ;text-align: center ;font-weight: 500;color:#F26b38">
        <p>{{infoCustomer.name}}</p>
        <p>{{infoCustomer.id}}</p>
      </div>
      <div class="row score " style="margin: 50px">
        <div class="col-6" style="border-right: 2px solid #F26b38">
          <span>RANK</span>
          <br>
          <span>{{rank}}</span>
        </div>
        <div class="col-6">
          <span>SCORE</span>
          <br>
          <span>{{infoCustomer.point}}</span>
        </div>
      </div>
      <div style="margin-top: 50px">
        <div class="info">Email: {{infoCustomer.email}}</div>
        <div class="info"> Phone: {{infoCustomer.phone}}</div>
        <div class="info"> Address: {{infoCustomer.address}}</div>
        <div class="info"> Id Card: {{infoCustomer.idCard}}</div>
      </div>
    </div>
  </div>
</div>

<script src="bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

